import{c as F,r,j as e,x as U,y as Y,V as H,u as W,t as q,z as P,h as T,T as K,U as X,e as J,X as Q,d as Z,A as z,B as ee,M as se,E as te,C as ne}from"./app-CN9TXcL5.js";import{D as ae,a as ie,b as re,c as le,e as ce,L as oe}from"./drawer-B6DM2O4g.js";import{B as R}from"./button-C5kjKC4E.js";import{I as de}from"./input-CWyv_tDE.js";import{M as xe,b as he,a as me}from"./MatchOptionEnum-CBfdu7oF.js";import{M as fe,u as V,P as ue,a as pe,L as je,m as B}from"./proxy-neSaiBkD.js";import{d as _}from"./dayjs.min-Oq8waMwx.js";import{A as ge}from"./AuthenticatedLayout-DsHC5qBV.js";import{S as N}from"./skeleton-D0ZeLD7G.js";import"./index-gFi65V1n.js";import"./wallet-DMBKUIUE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=F("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=F("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);class we extends r.Component{getSnapshotBeforeUpdate(a){const i=this.props.childRef.current;if(i&&a.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=i.offsetHeight||0,s.width=i.offsetWidth||0,s.top=i.offsetTop,s.left=i.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function be({children:t,isPresent:a}){const i=r.useId(),s=r.useRef(null),o=r.useRef({width:0,height:0,top:0,left:0}),{nonce:u}=r.useContext(fe);return r.useInsertionEffect(()=>{const{width:c,height:n,top:x,left:d}=o.current;if(a||!s.current||!c||!n)return;s.current.dataset.motionPopId=i;const f=document.createElement("style");return u&&(f.nonce=u),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${n}px !important;
            top: ${x}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[a]),e.jsx(we,{isPresent:a,childRef:s,sizeRef:o,children:r.cloneElement(t,{ref:s})})}const Ne=({children:t,initial:a,isPresent:i,onExitComplete:s,custom:o,presenceAffectsLayout:u,mode:c})=>{const n=V(ke),x=r.useId(),d=r.useCallback(m=>{n.set(m,!0);for(const v of n.values())if(!v)return;s&&s()},[n,s]),f=r.useMemo(()=>({id:x,initial:a,isPresent:i,custom:o,onExitComplete:d,register:m=>(n.set(m,!1),()=>n.delete(m))}),u?[Math.random(),d]:[i,d]);return r.useMemo(()=>{n.forEach((m,v)=>n.set(v,!1))},[i]),r.useEffect(()=>{!i&&!n.size&&s&&s()},[i]),c==="popLayout"&&(t=e.jsx(be,{isPresent:i,children:t})),e.jsx(ue.Provider,{value:f,children:t})};function ke(){return new Map}const S=t=>t.key||"";function L(t){const a=[];return r.Children.forEach(t,i=>{r.isValidElement(i)&&a.push(i)}),a}const I=({children:t,exitBeforeEnter:a,custom:i,initial:s=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:c="sync"})=>{const n=r.useMemo(()=>L(t),[t]),x=n.map(S),d=r.useRef(!0),f=r.useRef(n),m=V(()=>new Map),[v,w]=r.useState(n),[j,E]=r.useState(n);pe(()=>{d.current=!1,f.current=n;for(let p=0;p<j.length;p++){const h=S(j[p]);x.includes(h)?m.delete(h):m.get(h)!==!0&&m.set(h,!1)}},[j,x.length,x.join("-")]);const b=[];if(n!==v){let p=[...n];for(let h=0;h<j.length;h++){const g=j[h],C=S(g);x.includes(C)||(p.splice(h,0,g),b.push(g))}c==="wait"&&b.length&&(p=b),E(L(p)),w(n);return}const{forceRender:k}=r.useContext(je);return e.jsx(e.Fragment,{children:j.map(p=>{const h=S(p),g=n===j||x.includes(h),C=()=>{if(m.has(h))m.set(h,!0);else return;let M=!0;m.forEach(A=>{A||(M=!1)}),M&&(k==null||k(),E(f.current),o&&o())};return e.jsx(Ne,{isPresent:g,initial:!d.current||s?void 0:!1,custom:g?void 0:i,presenceAffectsLayout:u,mode:c,onExitComplete:g?void 0:C,children:p},h)})})},$=U.withTypes(),G=Y.withTypes();function Ce({className:t="",...a}){return e.jsx("input",{...a,type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:focus:ring-indigo-600 dark:focus:ring-offset-gray-800 "+t})}const Ee=500;function Me(){const{auth:t,settings:{bet:a}}=H().props,{toast:i}=W(),s=G(l=>l.event.selectedEvents),o=$(),[u,c]=r.useState(),[n,x]=r.useState(!1),[d,f]=r.useState(),[m,v]=r.useState(),[w,j]=r.useState(!1),[E,b]=r.useState(!1),k={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1}},p={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1}};r.useEffect(()=>{if(s.length>=a.min_selection){const l=a.selection_config.find(y=>y.selection===s.length);if(l){f(l);const y=l.allow_flex&&w?l.flex_0:l.main;v(y)}}else f(void 0)},[s,w,a.min_selection,a.selection_config]);const h=l=>o(z(l)),g=()=>o(P()),C=()=>{if(!t.user)return T.get(route("login"));const l={amount:u,events:s.map((y,D)=>({event_id:y.id,bet_option:y.betOption})),is_flexed:w};T.post(route("bets"),l,{onStart:()=>x(!0),onSuccess:y=>{o(P()),b(!1),c(""),j(!1),i({title:"Bet Successfully Placed",description:"Your bet has been placed successfully. You can view the details in your bet history.",variant:"success",action:e.jsx(K,{altText:"View Bet",children:e.jsx(X,{href:route("bets"),children:"View Bet"})})})},onError:y=>{const D=J(y);i({title:"Error Placing Bet",description:D??"There was an issue placing your bet. Try again or contact support.",variant:"destructive"})},onFinish:()=>x(!1)})},M=l=>e.jsxs("div",{className:"flex items-center justify-between py-2 bg-primary/20 border px-2 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:xe[l.betOption]}),e.jsxs("span",{className:"line-clamp-1",children:[l.team1.name," vs ",l.team2.name]})]}),e.jsx(R,{onClick:()=>h(l.id),variant:"ghost",className:"text-red-600 active:bg-red-100","aria-label":`Remove ${l.team1.name} vs ${l.team2.name}`,children:e.jsx(Q,{})})]},l.id),A=()=>d?e.jsxs("div",{className:"flex justify-between w-full items-start py-2 text-sm",children:[e.jsxs("div",{className:"whitespace-nowrap flex flex-col",children:[e.jsx("span",{children:"Multiplier"}),e.jsxs("div",{className:"mt-1 flex gap-2 items-center",children:[e.jsx("span",{className:Z({"opacity-25":!d.allow_flex}),children:"Flex"}),e.jsx(Ce,{disabled:!d.allow_flex,checked:w,onChange:l=>j(l.target.checked)})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"text-gray-300 text-xs",children:["Get all ",s.length," correct for "]}),"x",m]}),w&&d.allow_flex&&e.jsxs(e.Fragment,{children:[d.flex_1&&e.jsxs("div",{className:"flex items-end gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-300",children:["Get ",s.length-1," correct for"]}),"x",d.flex_1]}),d.flex_2&&e.jsxs("div",{className:"flex items-end gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-300",children:["Get ",s.length-2," correct for"]}),"x",d.flex_2]})]})]})]}):null;return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:s.length>0&&s.length<a.min_selection&&e.jsxs(B.div,{variants:k,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},className:"fixed right-0 bottom-[70px] flex gap-2 items-center justify-center ps-8 pe-2 h-8 bg-card text-white border rounded-l cursor-pointer",children:[e.jsx(ye,{className:"size-4"}),e.jsxs("span",{className:"text-xs",children:["Select at least ",a.min_selection," matches"]})]})}),e.jsx(I,{children:s.length>=a.min_selection&&e.jsxs(B.div,{variants:p,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},className:"fixed right-0 bottom-[70px] flex flex-col items-center justify-center w-12 h-16 bg-primary rounded-l cursor-pointer",onClick:()=>b(!0),"aria-label":"Open bet slip",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 text-sm text-white rounded-full bg-gradient-to-r from-secondary to-accent",children:s.length}),e.jsx("span",{className:"text-sm text-white",children:"Slip"})]})}),e.jsx(ae,{open:E,onOpenChange:b,children:e.jsxs(ie,{className:"h-[90%] bg-card",children:[e.jsx(re,{className:"justify-start flex flex-col",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx(le,{children:"Bet Slip"}),e.jsxs(R,{variant:"link",onClick:g,"aria-label":"Remove all events",className:"flex items-center gap-1 text-red-500 hover:bg-red-100",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"max-w-md mx-auto space-y-4",children:s.map(M)})}),e.jsxs(ce,{className:"px-0 pb-0 border-t",children:[e.jsxs("div",{className:"px-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Total Stake"}),e.jsx(de,{type:"number",step:"0.01",value:u,onChange:l=>c(l.target.value),required:!0,placeholder:Ee.toString(),"aria-label":"Enter stake amount",className:"w-fit rounded-none focus-visible:ring-offset-0 focus-visible:ring-1"})]}),A(),e.jsxs("div",{className:"flex justify-between w-full items-center text-lg py-2",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Potential Win"}),e.jsx("span",{children:q((Number(u)||0)*(m||0))})]})]}),e.jsxs(R,{disabled:n||s.length<a.min_selection||s.length>a.max_selection,onClick:C,"aria-label":"Place your bet",className:"rounded-none w-full text-lg h-16",children:[n&&e.jsx(oe,{className:"animate-spin"}),"Place Bet"]})]})]})})]})}const O=Object.values(me);function Se({onChange:t,option:a,disabled:i=!1}){return e.jsx("div",{className:"flex w-full justify-end space-x-0.5",children:O.map((s,o)=>e.jsx("span",{className:ee("flex h-8 w-14 items-center justify-center bg-primary px-1 text-sm font-bold cursor-pointer",{"bg-gradient-to-r from-secondary to-accent text-white":s===a,"opacity-25 cursor-not-allowed":i,"rounded-s":o===0,"rounded-e":o===O.length-1}),onClick:()=>{i||(a===s?t&&t(null):t&&t(s))},children:he[s]},s))})}function _e({event:t,sn:a,onChange:i,betOption:s,disabled:o}){return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 font-bold",children:a}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[_(t.match_date).format("DD/MM/YYYY")," ",_(t.kickoff_time).format("hh:mma")]}),e.jsx("span",{children:t.team1.name}),e.jsx("span",{children:t.team2.name})]})]}),e.jsx("div",{className:"w-48",children:e.jsx(Se,{onChange:i,option:s,disabled:o})})]})}function Ae(){return e.jsx("section",{className:"px-4",children:e.jsx("div",{className:"flex flex-col",children:Array.from({length:10}).map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-8 h-6 font-bold"}),e.jsxs("div",{className:"flex flex-col ml-2",children:[e.jsx(N,{className:"h-4 w-32 mb-1"}),e.jsx(N,{className:"h-4 w-28 mb-1"}),e.jsx(N,{className:"h-4 w-24"})]})]}),e.jsx("div",{className:"w-48",children:e.jsxs("div",{className:"flex w-full justify-end space-x-0.5",children:[e.jsx(N,{className:"h-8 w-14 rounded-none rounded-s"}),e.jsx(N,{className:"h-8 w-14 rounded-none"}),e.jsx(N,{className:"h-8 w-14 rounded-none rounded-e"})]})})]},a))})})}function Re({events:t,settings:a}){const i=G(c=>c.event.selectedEvents),s=$(),o=(c,n)=>{if(i.length===a.bet.required_selections)return alert("Maximum selection reached");s(n?ne({...c,betOption:n}):z(c.id))},u=r.useMemo(()=>c=>{const n=i.find(x=>x.id===c);return n?n.betOption:void 0},[i]);return e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Events"}),e.jsxs("div",{className:"relative h-full",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 font-bold"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{children:"Events"})})]}),e.jsxs("div",{className:"flex justify-end w-48 gap-1 text-sm py-2 pe-4",children:[e.jsx("span",{className:"w-14 text-center",children:"1(Home)"}),e.jsx("span",{className:"w-14 text-center",children:"X(Draw)"}),e.jsx("span",{className:"w-14 text-center",children:"2(Away)"})]})]}),e.jsx(te,{fallback:e.jsx(Ae,{}),data:"events",children:e.jsxs("div",{className:"px-4",children:[t&&t.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2a4 4 0 01.879-2.57l.87-.87a4 4 0 015.682 0l.87.87A4 4 0 0115 15v2M12 7v.01M12 12h.01"})}),e.jsx("p",{className:"mt-4 text-lg font-medium text-gray-200",children:"No Events Available"}),e.jsx("p",{className:"mt-2 text-sm text-gray-300",children:"Currently, there are no events to display. Please check back later."})]}),t&&t.length>0&&t.map((c,n)=>e.jsx(_e,{event:c,sn:n+1,onChange:x=>o(c,x),betOption:u(c.id),disabled:_().isAfter(_(c.kickoff_time))},n))]})})]}),e.jsx(Me,{})]})}Re.layout=t=>e.jsx(ge,{children:t});export{Re as default};
