import{c as C,u as S,r as i,j as e,M as W,t as A,d as D,X as F,U as u,h as L,e as M}from"./app-BteG_EHQ.js";import{A as _}from"./AuthenticatedLayout-BU5BNhg8.js";import{B as o}from"./button-DkdEXNXu.js";import{d as z}from"./dayjs.min-JM-b670j.js";import{l as E}from"./localizedFormat-rmzy3Qbd.js";import{I as x}from"./input-DTySDMSr.js";import{L as O,D as B,a as I,b as P,c as U,e as p}from"./drawer-D-iBoiAH.js";import{W as H}from"./wallet-D9DRw4dV.js";import{L as T,C as q}from"./landmark--ORgXycD.js";import"./index-iLPL1g4p.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=C("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);z.extend(E);function R({defaultAccount:n,auth:f,accounts:t}){const{toast:r}=S(),[w,d]=i.useState(!1),[m,h]=i.useState(!1),[a,v]=i.useState(n),[c,b]=i.useState(),N=()=>d(!0),y=()=>d(!1),g=s=>{v(s),y()},k=()=>{if(!c)return r({title:"Amount to withdraw is required",variant:"destructive"});if(!a)return r({title:"Please select an account",variant:"destructive"});L.post(route("withdrawal.store"),{amount:Number(c),account_id:a.id},{onStart:()=>h(!0),onFinish:()=>h(!1),onSuccess:s=>{r({title:"Withdrawal successful",description:s.props.flash.success,variant:"success"})},onError:s=>{const l=M(s);r({title:l??"Withdrawal failed",variant:"destructive"})}})};return e.jsxs(e.Fragment,{children:[e.jsx(W,{title:"Withdraw"}),e.jsxs("div",{className:"flex flex-col px-4 py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"mb-2 text-end",children:["Balance: ",A(f.user.balance)]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"amount",children:e.jsx(H,{className:"absolute size-8 top-3 start-3 text-gray-300"})}),e.jsx(x,{id:"amount",value:c,onChange:s=>b(s.target.value),placeholder:"Amount to Withdraw",className:"h-14 ps-[3.75rem] placeholder:text-gray-400",type:"number",step:"0.01"})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("label",{htmlFor:"bank",children:e.jsx(T,{className:"absolute size-8 top-3 start-3 text-gray-300"})}),e.jsx(x,{id:"bank",className:"h-14 ps-[3.75rem] cursor-pointer placeholder:text-gray-400",readOnly:!0,onClick:N,placeholder:"Select Bank",value:a==null?void 0:a.bank_name})]}),e.jsxs(o,{disabled:m,onClick:k,className:"text-lg h-14 mt-8",children:[m&&e.jsx(O,{className:"animate-spin"}),"Withdraw"]})]}),e.jsx(B,{open:w,onOpenChange:d,dismissible:!0,children:e.jsxs(I,{className:"bg-card",children:[e.jsx(P,{children:e.jsx(U,{children:"Select Bank"})}),e.jsx("div",{className:"min-h-[30vh] overflow-y-auto",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:t.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map((s,l)=>e.jsxs("li",{className:D("p-4 flex justify-between items-center cursor-pointer hover:bg-primary",{"border-t":l===0,"border-b":l===t.length-1,"bg-primary/10":s.id===(a==null?void 0:a.id)}),onClick:()=>g(s),children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:s.bank_name}),e.jsx("span",{className:"text-sm text-gray-300",children:s.account_number})]}),s.id===(a==null?void 0:a.id)&&e.jsx(q,{className:"text-secondary"})]},s.bank_code))}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-16",children:[e.jsx(F,{className:"size-8 mb-4"}),e.jsx("p",{children:"No accounts found"}),e.jsx(o,{variant:"link",asChild:!0,children:e.jsxs(u,{href:route("add-withdrawal-account"),className:"mt-4 text-secondary underline",children:[e.jsx(j,{className:"mr-2"}),"Add a New Account"]})})]})})}),e.jsx(p,{children:t.length>0&&e.jsx(p,{children:e.jsx(o,{asChild:!0,children:e.jsxs(u,{href:route("add-withdrawal-account"),children:[e.jsx(j,{}),"Add a New Account"]})})})})]})})]})}R.layout=n=>e.jsx(_,{backUrl:route("wallet"),showHeader:!1,hideBottomNav:!0,title:"Withdraw",children:n});export{R as default};
