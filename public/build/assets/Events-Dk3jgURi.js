import{c as F,o as U,p as Y,j as e,r,V as H,u as q,t as W,q as D,h as P,T as K,U as X,e as J,X as Q,n as Z,s as V,v as ee,M as te,w as se}from"./app-BRiJH4YG.js";import{D as ne,a as ie,b as ae,c as re,e as le,L as ce}from"./drawer-C-YoPFLq.js";import{B as _}from"./button-BR4ypJEM.js";import{I as oe}from"./input-CIzAbARp.js";import{M as de,b as xe,a as he}from"./MatchOptionEnum-CBfdu7oF.js";import{M as me,u as z,P as pe,a as ue,L as fe,m as T}from"./proxy-DG9Kynsd.js";import{d as A}from"./dayjs.min-BTy4bqH7.js";import{A as je}from"./AuthenticatedLayout-Xp2B35dh.js";import"./index-CC-Jj5Ps.js";import"./wallet-DkEPtku0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=F("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=F("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),$=U.withTypes(),G=Y.withTypes();function ye({className:i="",...a}){return e.jsx("input",{...a,type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:focus:ring-indigo-600 dark:focus:ring-offset-gray-800 "+i})}class be extends r.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=s.offsetHeight||0,t.width=s.offsetWidth||0,t.top=s.offsetTop,t.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function we({children:i,isPresent:a}){const s=r.useId(),t=r.useRef(null),m=r.useRef({width:0,height:0,top:0,left:0}),{nonce:u}=r.useContext(me);return r.useInsertionEffect(()=>{const{width:c,height:n,top:d,left:o}=m.current;if(a||!t.current||!c||!n)return;t.current.dataset.motionPopId=s;const p=document.createElement("style");return u&&(p.nonce=u),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${n}px !important;
            top: ${d}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[a]),e.jsx(be,{isPresent:a,childRef:t,sizeRef:m,children:r.cloneElement(i,{ref:t})})}const Ne=({children:i,initial:a,isPresent:s,onExitComplete:t,custom:m,presenceAffectsLayout:u,mode:c})=>{const n=z(Ce),d=r.useId(),o=r.useCallback(h=>{n.set(h,!0);for(const y of n.values())if(!y)return;t&&t()},[n,t]),p=r.useMemo(()=>({id:d,initial:a,isPresent:s,custom:m,onExitComplete:o,register:h=>(n.set(h,!1),()=>n.delete(h))}),u?[Math.random(),o]:[s,o]);return r.useMemo(()=>{n.forEach((h,y)=>n.set(y,!1))},[s]),r.useEffect(()=>{!s&&!n.size&&t&&t()},[s]),c==="popLayout"&&(i=e.jsx(we,{isPresent:s,children:i})),e.jsx(pe.Provider,{value:p,children:i})};function Ce(){return new Map}const E=i=>i.key||"";function B(i){const a=[];return r.Children.forEach(i,s=>{r.isValidElement(s)&&a.push(s)}),a}const I=({children:i,exitBeforeEnter:a,custom:s,initial:t=!0,onExitComplete:m,presenceAffectsLayout:u=!0,mode:c="sync"})=>{const n=r.useMemo(()=>B(i),[i]),d=n.map(E),o=r.useRef(!0),p=r.useRef(n),h=z(()=>new Map),[y,b]=r.useState(n),[j,M]=r.useState(n);ue(()=>{o.current=!1,p.current=n;for(let f=0;f<j.length;f++){const x=E(j[f]);d.includes(x)?h.delete(x):h.get(x)!==!0&&h.set(x,!1)}},[j,d.length,d.join("-")]);const w=[];if(n!==y){let f=[...n];for(let x=0;x<j.length;x++){const g=j[x],C=E(g);d.includes(C)||(f.splice(x,0,g),w.push(g))}c==="wait"&&w.length&&(f=w),M(B(f)),b(n);return}const{forceRender:N}=r.useContext(fe);return e.jsx(e.Fragment,{children:j.map(f=>{const x=E(f),g=n===j||d.includes(x),C=()=>{if(h.has(x))h.set(x,!0);else return;let k=!0;h.forEach(S=>{S||(k=!1)}),k&&(N==null||N(),M(p.current),m&&m())};return e.jsx(Ne,{isPresent:g,initial:!o.current||t?void 0:!1,custom:g?void 0:s,presenceAffectsLayout:u,mode:c,onExitComplete:g?void 0:C,children:f},x)})})},L=500;function Me(){const{auth:i,settings:{bet:a}}=H().props,{toast:s}=q(),t=G(l=>l.event.selectedEvents),m=$(),[u,c]=r.useState(),[n,d]=r.useState(!1),[o,p]=r.useState(),[h,y]=r.useState(),[b,j]=r.useState(!1),[M,w]=r.useState(!1),N={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1}},f={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1}};r.useEffect(()=>{if(t.length>=a.min_selection){const l=a.selection_config.find(v=>v.selection===t.length);if(l){p(l);const v=l.allow_flex&&b?l.flex_all:l.main;y(v)}}else p(void 0)},[t,b,a.min_selection,a.selection_config]);const x=l=>m(V(l)),g=()=>m(D()),C=()=>{if(!i.user)return P.get(route("login"));const l={amount:u,events:t.map((v,R)=>({event_id:v.id,bet_option:v.betOption})),is_flexed:b};P.post(route("bets"),l,{onStart:()=>d(!0),onSuccess:v=>{m(D()),w(!1),c(L.toString()),s({title:"Bet Successfully Placed",description:"Your bet has been placed successfully. You can view the details in your bet history.",variant:"success",action:e.jsx(K,{altText:"View Bet",children:e.jsx(X,{href:route("bets"),children:"View Bet"})})})},onError:v=>{const R=J(v);s({title:"Error Placing Bet",description:R??"There was an issue placing your bet. Try again or contact support.",variant:"destructive"})},onFinish:()=>d(!1)})},k=l=>e.jsxs("div",{className:"flex items-center justify-between py-2 bg-primary/20 border px-2 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-500",children:de[l.betOption]}),e.jsxs("span",{className:"line-clamp-1",children:[l.team1.name," vs ",l.team2.name]})]}),e.jsx(_,{onClick:()=>x(l.id),variant:"ghost",className:"text-red-600 active:bg-red-100","aria-label":`Remove ${l.team1.name} vs ${l.team2.name}`,children:e.jsx(Q,{})})]},l.id),S=()=>o?e.jsxs("div",{className:"flex justify-between w-full items-start py-2 text-sm",children:[e.jsxs("div",{className:"whitespace-nowrap flex flex-col",children:[e.jsx("span",{children:"Multiplier"}),e.jsxs("div",{className:"mt-1 flex gap-2 items-center",children:[e.jsx("span",{className:Z({"opacity-25":!o.allow_flex}),children:"Flex"}),e.jsx(ye,{disabled:!o.allow_flex,checked:b,onChange:l=>j(l.target.checked)})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"text-gray-300 text-xs",children:["Get all ",t.length," correct for "]}),"x",h]}),b&&o.allow_flex&&e.jsxs(e.Fragment,{children:[o.flex_1&&e.jsxs("div",{className:"flex items-end gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-300",children:["Get ",t.length-1," correct for"]}),"x",o.flex_1]}),o.flex_2&&e.jsxs("div",{className:"flex items-end gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-300",children:["Get ",t.length-2," correct for"]}),"x",o.flex_2]})]})]})]}):null;return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:t.length>0&&t.length<a.min_selection&&e.jsxs(T.div,{variants:N,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},className:"fixed right-0 bottom-[70px] flex gap-2 items-center justify-center ps-8 pe-2 h-8 bg-card text-white border rounded-l cursor-pointer",children:[e.jsx(ge,{className:"size-4"}),e.jsxs("span",{className:"text-xs",children:["Select at least ",a.min_selection," matches"]})]})}),e.jsx(I,{children:t.length>=a.min_selection&&e.jsxs(T.div,{variants:f,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},className:"fixed right-0 bottom-[70px] flex flex-col items-center justify-center w-12 h-16 bg-primary rounded-l cursor-pointer",onClick:()=>w(!0),"aria-label":"Open bet slip",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 text-sm text-white rounded-full bg-gradient-to-r from-secondary to-accent",children:t.length}),e.jsx("span",{className:"text-sm text-white",children:"Slip"})]})}),e.jsx(ne,{open:M,onOpenChange:w,children:e.jsxs(ie,{className:"h-[90%] bg-card",children:[e.jsx(ae,{className:"justify-start flex flex-col",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx(re,{children:"Bet Slip"}),e.jsxs(_,{variant:"link",onClick:g,"aria-label":"Remove all events",className:"flex items-center gap-1 text-red-500 hover:bg-red-100",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"max-w-md mx-auto space-y-4",children:t.map(k)})}),e.jsxs(le,{className:"px-0 pb-0 border-t",children:[e.jsxs("div",{className:"px-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Total Stake"}),e.jsx(oe,{type:"number",step:"0.01",value:u,onChange:l=>c(l.target.value),required:!0,placeholder:L.toString(),"aria-label":"Enter stake amount",className:"w-fit rounded-none focus-visible:ring-offset-0 focus-visible:ring-1"})]}),S(),e.jsxs("div",{className:"flex justify-between w-full items-center text-lg py-2",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Potential Win"}),e.jsx("span",{children:W((Number(u)||0)*(h||0))})]})]}),e.jsxs(_,{disabled:n||t.length<a.min_selection||t.length>a.max_selection,onClick:C,"aria-label":"Place your bet",className:"rounded-none w-full text-lg h-16",children:[n&&e.jsx(ce,{className:"animate-spin"}),"Place Bet"]})]})]})})]})}const O=Object.values(he);function ke({onChange:i,option:a}){return e.jsx("div",{className:"flex w-full justify-end space-x-0.5",children:O.map((s,t)=>e.jsx("span",{className:ee("flex h-8 w-14 items-center justify-center bg-primary px-1 text-sm font-bold",{"bg-gradient-to-r from-secondary to-accent text-white":s===a,"rounded-s":t===0,"rounded-e":t===O.length-1}),onClick:()=>{a===s?i&&i(null):i&&i(s)},children:xe[s]},s))})}function Ee({event:i,sn:a,onChange:s,betOption:t}){return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 font-bold",children:a}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[A(i.match_date).format("DD/MM/YYYY")," ",A(i.kickoff_time).format("hh:mma")]}),e.jsx("span",{children:i.team1.name}),e.jsx("span",{children:i.team2.name})]})]}),e.jsx("div",{className:"w-48",children:e.jsx(ke,{onChange:s,option:t})})]})}function Se({events:i,settings:a}){const s=G(c=>c.event.selectedEvents),t=$(),m=(c,n)=>{if(s.length===a.bet.required_selections)return alert("Maximum selection reached");t(n?se({...c,betOption:n}):V(c.id))},u=r.useMemo(()=>c=>{const n=s.find(d=>d.id===c);return n?n.betOption:void 0},[s]);return e.jsxs(e.Fragment,{children:[e.jsx(te,{title:"Events"}),e.jsxs("div",{className:"relative h-full",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 bg-card border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 font-bold"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{children:"Events"})})]}),e.jsxs("div",{className:"flex justify-end w-48 gap-1 text-sm",children:[e.jsx("span",{className:"w-14 text-center",children:"1(Home)"}),e.jsx("span",{className:"w-14 text-center",children:"X(Draw)"}),e.jsx("span",{className:"w-14 text-center",children:"2(Away)"})]})]}),e.jsx("div",{className:"px-4",children:i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2a4 4 0 01.879-2.57l.87-.87a4 4 0 015.682 0l.87.87A4 4 0 0115 15v2M12 7v.01M12 12h.01"})}),e.jsx("p",{className:"mt-4 text-lg font-medium text-gray-200",children:"No Events Available"}),e.jsx("p",{className:"mt-2 text-sm text-gray-300",children:"Currently, there are no events to display. Please check back later."})]}):i.map((c,n)=>e.jsx(Ee,{event:c,sn:n+1,onChange:d=>m(c,d),betOption:u(c.id)},n))})]}),e.jsx(Me,{})]})}Se.layout=i=>e.jsx(je,{children:i});export{Se as default};
