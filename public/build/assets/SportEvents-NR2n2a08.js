import{c as F,r as i,j as e,x as G,y as U,V as H,t as W,z as P,h as B,A as R,U as K,e as X,X as q,d as J,B as z,C as Q,M as Z,E as ee,D as se}from"./app-DPLLtSvf.js";import{D as te,a as ne,b as ae,c as re,e as ie,L as le}from"./drawer-DlQWQCbK.js";import{B as S}from"./button-Dvo88yrR.js";import{I as ce}from"./input-cAElQs8n.js";import{M as oe,b as de,a as xe}from"./MatchOptionEnum-CBfdu7oF.js";import{M as me,u as V,P as he,a as fe,L as pe,m as L}from"./proxy-C34-eVgI.js";import{d as D}from"./dayjs.min-BxnBxp_Y.js";import{A as ue}from"./AuthenticatedLayout-CdCXwzoh.js";import{S as b}from"./skeleton-CDHRemeo.js";import"./index-CcrVYoZh.js";import"./wallet-CikHa3Fw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=F("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=F("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);class ye extends i.Component{getSnapshotBeforeUpdate(n){const s=this.props.childRef.current;if(s&&n.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=s.offsetHeight||0,r.width=s.offsetWidth||0,r.top=s.offsetTop,r.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ve({children:t,isPresent:n}){const s=i.useId(),r=i.useRef(null),d=i.useRef({width:0,height:0,top:0,left:0}),{nonce:p}=i.useContext(me);return i.useInsertionEffect(()=>{const{width:o,height:a,top:c,left:u}=d.current;if(n||!r.current||!o||!a)return;r.current.dataset.motionPopId=s;const h=document.createElement("style");return p&&(h.nonce=p),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[n]),e.jsx(ye,{isPresent:n,childRef:r,sizeRef:d,children:i.cloneElement(t,{ref:r})})}const be=({children:t,initial:n,isPresent:s,onExitComplete:r,custom:d,presenceAffectsLayout:p,mode:o})=>{const a=V(we),c=i.useId(),u=i.useCallback(m=>{a.set(m,!0);for(const j of a.values())if(!j)return;r&&r()},[a,r]),h=i.useMemo(()=>({id:c,initial:n,isPresent:s,custom:d,onExitComplete:u,register:m=>(a.set(m,!1),()=>a.delete(m))}),p?[Math.random(),u]:[s,u]);return i.useMemo(()=>{a.forEach((m,j)=>a.set(j,!1))},[s]),i.useEffect(()=>{!s&&!a.size&&r&&r()},[s]),o==="popLayout"&&(t=e.jsx(ve,{isPresent:s,children:t})),e.jsx(he.Provider,{value:h,children:t})};function we(){return new Map}const _=t=>t.key||"";function I(t){const n=[];return i.Children.forEach(t,s=>{i.isValidElement(s)&&n.push(s)}),n}const O=({children:t,exitBeforeEnter:n,custom:s,initial:r=!0,onExitComplete:d,presenceAffectsLayout:p=!0,mode:o="sync"})=>{const a=i.useMemo(()=>I(t),[t]),c=a.map(_),u=i.useRef(!0),h=i.useRef(a),m=V(()=>new Map),[j,E]=i.useState(a),[g,w]=i.useState(a);fe(()=>{u.current=!1,h.current=a;for(let f=0;f<g.length;f++){const x=_(g[f]);c.includes(x)?m.delete(x):m.get(x)!==!0&&m.set(x,!1)}},[g,c.length,c.join("-")]);const N=[];if(a!==j){let f=[...a];for(let x=0;x<g.length;x++){const y=g[x],C=_(y);c.includes(C)||(f.splice(x,0,y),N.push(y))}o==="wait"&&N.length&&(f=N),w(I(f)),E(a);return}const{forceRender:k}=i.useContext(pe);return e.jsx(e.Fragment,{children:g.map(f=>{const x=_(f),y=a===g||c.includes(x),C=()=>{if(m.has(x))m.set(x,!0);else return;let M=!0;m.forEach(l=>{l||(M=!1)}),M&&(k==null||k(),w(h.current),d&&d())};return e.jsx(be,{isPresent:y,initial:!u.current||r?void 0:!1,custom:y?void 0:s,presenceAffectsLayout:p,mode:o,onExitComplete:y?void 0:C,children:f},x)})})},$=G.withTypes(),Y=U.withTypes();function Ne({className:t="",...n}){return e.jsx("input",{...n,type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:focus:ring-indigo-600 dark:focus:ring-offset-gray-800 "+t})}const ke=500;function Ce(){const{auth:t,settings:{bet:n}}=H().props,s=Y(l=>l.event.selectedEvents),r=$(),[d,p]=i.useState(),[o,a]=i.useState(!1),[c,u]=i.useState(),[h,m]=i.useState(),[j,E]=i.useState(!1),[g,w]=i.useState(!1),N={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1}},k={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1}};i.useEffect(()=>{if(s.length>=n.min_selection){const l=n.selection_config.find(v=>v.selection===s.length);if(l){u(l);const v=l.allow_flex&&j?l.flex_0:l.main;m(v)}}else u(void 0)},[s,j,n.min_selection,n.selection_config]);const f=l=>r(z(l)),x=()=>r(P()),y=()=>{if(!t.user)return B.get(route("login"));const l={amount:d,events:s.map((v,A)=>({event_id:v.id,bet_option:v.betOption})),is_flexed:j};B.post(route("bets"),l,{onStart:()=>a(!0),onSuccess:v=>{r(P()),w(!1),p(""),E(!1),R.success("Bet Successfully Placed",{description:"Your bet has been placed successfully. You can view the details in your bet history.",action:e.jsx(S,{"aria-label":"View Bet",size:"sm",children:e.jsx(K,{href:route("bets.open-bets"),children:"View Bet"})})})},onError:v=>{const A=X(v);R.error("Error Placing Bet",{description:A??"There was an issue placing your bet. Try again or contact support."})},onFinish:()=>a(!1)})},C=l=>e.jsxs("div",{className:"flex items-center justify-between py-2 bg-primary/20 border px-2 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-300",children:oe[l.betOption]}),e.jsxs("span",{className:"line-clamp-1",children:[l.team1.name," vs ",l.team2.name]})]}),e.jsx(S,{onClick:()=>f(l.id),variant:"ghost",className:"text-red-600 active:bg-red-100","aria-label":`Remove ${l.team1.name} vs ${l.team2.name}`,children:e.jsx(q,{})})]},l.id),M=()=>c?e.jsxs("div",{className:"flex justify-between w-full items-start py-2 text-sm",children:[e.jsxs("div",{className:"whitespace-nowrap flex flex-col",children:[e.jsx("span",{children:"Multiplier"}),!c.allow_flex&&e.jsxs("div",{className:"mt-1 flex gap-2 items-center",children:[e.jsx("span",{className:J({"opacity-25":!c.allow_flex}),children:"Flex"}),e.jsx(Ne,{disabled:!c.allow_flex,checked:j,onChange:l=>E(l.target.checked)})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"text-gray-300 text-xs",children:["Get all ",s.length," correct for "]}),"x",h]}),j&&c.allow_flex&&e.jsxs(e.Fragment,{children:[c.flex_1&&e.jsxs("div",{className:"flex items-end gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-300",children:["Get ",s.length-1," correct for"]}),"x",c.flex_1]}),c.flex_2&&e.jsxs("div",{className:"flex items-end gap-1 text-xs",children:[e.jsxs("span",{className:"text-gray-300",children:["Get ",s.length-2," correct for"]}),"x",c.flex_2]})]})]})]}):null;return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:s.length>0&&s.length<n.min_selection&&e.jsxs(L.div,{variants:N,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},className:"fixed right-0 bottom-[70px] flex gap-2 items-center justify-center ps-8 pe-2 h-8 bg-card text-white border rounded-l cursor-pointer",children:[e.jsx(je,{className:"size-4"}),e.jsxs("span",{className:"text-xs",children:["Select at least ",n.min_selection," matches"]})]})}),e.jsx(O,{children:s.length>=n.min_selection&&e.jsxs(L.div,{variants:k,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},className:"fixed right-0 bottom-[70px] flex flex-col items-center justify-center w-12 h-16 bg-primary rounded-l cursor-pointer",onClick:()=>w(!0),"aria-label":"Open bet slip",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 text-sm text-white rounded-full bg-gradient-to-r from-secondary to-accent",children:s.length}),e.jsx("span",{className:"text-sm text-white",children:"Slip"})]})}),e.jsx(te,{open:g,onOpenChange:w,children:e.jsxs(ne,{className:"h-[90%] bg-card",children:[e.jsx(ae,{className:"justify-start flex flex-col",children:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx(re,{children:"Bet Slip"}),e.jsxs(S,{variant:"link",onClick:x,"aria-label":"Remove all events",className:"flex items-center gap-1 text-red-500 hover:bg-red-100",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"max-w-md mx-auto space-y-4",children:s.map(C)})}),e.jsxs(ie,{className:"px-0 pb-0 border-t",children:[e.jsxs("div",{className:"px-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Total Stake"}),e.jsx(ce,{type:"number",step:"0.01",value:d,onChange:l=>p(l.target.value),required:!0,placeholder:ke.toString(),"aria-label":"Enter stake amount",className:"w-fit rounded-none focus-visible:ring-offset-0 focus-visible:ring-1"})]}),M(),e.jsxs("div",{className:"flex justify-between w-full items-center text-lg py-2",children:[e.jsx("span",{className:"whitespace-nowrap",children:"Potential Win"}),e.jsx("span",{children:W((Number(d)||0)*(h||0))})]})]}),e.jsxs(S,{disabled:o||s.length<n.min_selection||s.length>n.max_selection,onClick:y,"aria-label":"Place your bet",className:"rounded-none w-full text-lg h-16",children:[o&&e.jsx(le,{className:"animate-spin"}),"Place Bet"]})]})]})})]})}const T=Object.values(xe);function Ee({onChange:t,option:n,disabled:s=!1}){return e.jsx("div",{className:"flex w-full justify-end space-x-0.5",children:T.map((r,d)=>e.jsx("span",{className:Q("flex h-8 w-14 items-center justify-center bg-primary px-1 text-sm font-bold cursor-pointer",{"bg-gradient-to-r from-secondary to-accent text-white":r===n,"opacity-25 cursor-not-allowed":s,"rounded-s":d===0,"rounded-e":d===T.length-1}),onClick:()=>{s||(n===r?t&&t(null):t&&t(r))},children:de[r]},r))})}function Me({event:t,sn:n,onChange:s,betOption:r,disabled:d}){return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 font-bold",children:n}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[D(t.match_date).format("DD/MM/YYYY")," ",D(t.kickoff_time).format("hh:mma")]}),e.jsx("span",{children:t.team1.name}),e.jsx("span",{children:t.team2.name})]})]}),e.jsx("div",{className:"w-48",children:e.jsx(Ee,{onChange:s,option:r,disabled:d})})]})}function Se(){return e.jsx("section",{className:"px-4",children:e.jsx("div",{className:"flex flex-col",children:Array.from({length:10}).map((t,n)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"w-8 h-6 font-bold"}),e.jsxs("div",{className:"flex flex-col ml-2",children:[e.jsx(b,{className:"h-4 w-32 mb-1"}),e.jsx(b,{className:"h-4 w-28 mb-1"}),e.jsx(b,{className:"h-4 w-24"})]})]}),e.jsx("div",{className:"w-48",children:e.jsxs("div",{className:"flex w-full justify-end space-x-0.5",children:[e.jsx(b,{className:"h-8 w-14 rounded-none rounded-s"}),e.jsx(b,{className:"h-8 w-14 rounded-none"}),e.jsx(b,{className:"h-8 w-14 rounded-none rounded-e"})]})})]},n))})})}function _e({events:t,settings:n}){const s=Y(o=>o.event.selectedEvents),r=$(),d=(o,a)=>{if(s.length===n.bet.max_selection){R.error(`You cannot select more than ${n.bet.max_selection} matches`);return}r(a?se({...o,betOption:a}):z(o.id))},p=i.useMemo(()=>o=>{const a=s.find(c=>c.id===o);return a?a.betOption:void 0},[s]);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Events"}),e.jsxs("div",{className:"relative h-full",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 font-bold"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{children:"Events"})})]}),e.jsxs("div",{className:"flex justify-end w-48 gap-1 text-sm py-2 pe-4",children:[e.jsx("span",{className:"w-14 text-center",children:"1(Home)"}),e.jsx("span",{className:"w-14 text-center",children:"X(Draw)"}),e.jsx("span",{className:"w-14 text-center",children:"2(Away)"})]})]}),e.jsx(ee,{fallback:e.jsx(Se,{}),data:"events",children:e.jsxs("div",{className:"px-4",children:[t&&t.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2a4 4 0 01.879-2.57l.87-.87a4 4 0 015.682 0l.87.87A4 4 0 0115 15v2M12 7v.01M12 12h.01"})}),e.jsx("p",{className:"mt-4 text-lg font-medium text-gray-200",children:"No Events Available"}),e.jsx("p",{className:"mt-2 text-sm text-gray-300",children:"Currently, there are no events to display. Please check back later."})]}),t&&t.length>0&&t.map((o,a)=>e.jsx(Me,{event:o,sn:a+1,onChange:c=>d(o,c),betOption:p(o.id),disabled:D().isAfter(D(o.kickoff_time))},a))]})})]}),e.jsx(Ce,{})]})}_e.layout=t=>e.jsx(ue,{children:t});export{_e as default};
