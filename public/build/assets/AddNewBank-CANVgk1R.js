import{c as S,u as F,r as l,j as e,M as L,a as E,h as M,e as O}from"./app-CN9TXcL5.js";import{A as I}from"./AuthenticatedLayout-DsHC5qBV.js";import{B as u}from"./button-C5kjKC4E.js";import{I as h}from"./input-CWyv_tDE.js";import{L as p,D as j,a as f,b as v,c as b,d as R,e as U}from"./drawer-B6DM2O4g.js";import{L as z,C as H}from"./landmark-CGvCVkj4.js";import"./wallet-DMBKUIUE.js";import"./index-gFi65V1n.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=S("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);function T({transaction:x,auth:W,banks:N}){const{toast:r}=F(),[n,i]=l.useState(!1),[y,o]=l.useState(!1),[d,g]=l.useState(),[s,k]=l.useState(),[t,m]=l.useState(),w=()=>o(!0),C=()=>o(!1),A=a=>{k(a),C()},D=()=>{if(!s)return r({title:"Please select an account",variant:"destructive"});if(!d)return r({title:"Please enter your account number",variant:"destructive"});i(!0),E.post(route("resolve-bank"),{account_number:d,bank_code:s==null?void 0:s.bank_code}).then(a=>{m(a.data)}).catch(a=>{let c=a.response.data.message;r({title:c,variant:"destructive"})}).finally(()=>i(!1))},_=()=>{if(!t)return r({title:"Invalid bank details",variant:"destructive"});const a={...t};M.post(route("add-withdrawal-account.store"),a,{onStart:()=>{i(!0)},onFinish:()=>{i(!1)},onError:c=>{const B=O(c);r({title:B??"Error adding bank",variant:"destructive"})},onSuccess:c=>{r({title:c.props.flash.success??"Bank account added successfully",variant:"success"})}})};return e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Withdraw"}),e.jsxs("div",{className:"flex flex-col px-4 py-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("label",{htmlFor:"bank",children:e.jsx(z,{className:"absolute size-8 top-3 start-3 text-gray-300"})}),e.jsx(h,{id:"bank",className:"h-14 ps-[3.75rem] cursor-pointer placeholder:text-gray-400",readOnly:!0,onClick:w,placeholder:"Select Bank",value:s==null?void 0:s.bank_name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"account_number",children:e.jsx(P,{className:"absolute size-8 top-3 start-3 text-gray-300"})}),e.jsx(h,{id:"account_number",placeholder:"Account Number",className:"h-14 ps-[3.75rem] placeholder:text-gray-400",value:d,onChange:a=>g(a.target.value)})]}),e.jsxs(u,{onClick:D,className:"text-lg h-14 mt-8",disabled:n,children:[n&&e.jsx(p,{className:"animate-spin"}),"Add Bank"]})]}),e.jsx(j,{open:y,onOpenChange:o,dismissible:!0,children:e.jsxs(f,{className:"bg-card",children:[e.jsx(v,{children:e.jsx(b,{children:"Select Bank"})}),e.jsx("div",{className:"h-[65vh] overflow-y-auto",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:N.map(a=>e.jsxs("li",{className:"p-4 flex justify-between cursor-pointer hover:bg-primary",onClick:()=>A(a),children:[a.bank_name,a.bank_code===(s==null?void 0:s.bank_code)&&e.jsx(H,{className:"text-secondary"})]},a.bank_code))})})]})}),e.jsx(j,{open:!!t,onOpenChange:a=>{a||m(void 0)},dismissible:!1,children:e.jsxs(f,{className:"bg-card",children:[e.jsxs(v,{className:"py-4 px-4",children:[e.jsx(b,{className:"font-bold text-xl",children:"Confirm to Add Bank"}),e.jsx(R,{className:"sr-only",children:"Resolved bank details"})]}),e.jsx("div",{className:"px-4 py-2",children:t?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-4 mt-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:t.account_name}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Account Name"})]}),e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:t.bank_name}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Bank Name"})]}),e.jsxs("div",{className:"flex flex-row-reverse justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:t.account_number}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Account Number"})]})]})}):e.jsx("p",{className:"text-center text-gray-500",children:"No details available."})}),e.jsxs(U,{className:"flex flex-row px-0 pb-0 gap-0 ",children:[e.jsx(u,{variant:"destructive",onClick:()=>m(void 0),className:"rounded-none h-12 text-base",disabled:n,children:"Cancel"}),e.jsxs(u,{variant:"default",onClick:_,className:"w-full rounded-none h-12 text-base",disabled:n,children:[n&&e.jsx(p,{className:"animate-spin"}),"Add Bank"]})]})]})})]})}T.layout=x=>e.jsx(I,{backUrl:route("withdraw"),showHeader:!1,hideBottomNav:!0,title:"Add New Bank Account",children:x});export{T as default};
