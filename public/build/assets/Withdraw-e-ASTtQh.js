import{c as S,u as W,r as i,j as e,M as A,t as D,d as F,X as L,U as u,h as M,e as _}from"./app-DPLLtSvf.js";import{A as z}from"./AuthenticatedLayout-CdCXwzoh.js";import{B as o}from"./button-Dvo88yrR.js";import{d as E}from"./dayjs.min-BxnBxp_Y.js";import{l as O}from"./localizedFormat-D1D9ccR-.js";import{I as x}from"./input-cAElQs8n.js";import{L as B,D as I,a as P,b as U,c as H,e as p}from"./drawer-DlQWQCbK.js";import{W as T}from"./wallet-CikHa3Fw.js";import{L as q,C as R}from"./landmark-C9FONQuO.js";import"./index-CcrVYoZh.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=S("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);E.extend(O);function X({defaultAccount:n,can_withdraw:f,auth:w,accounts:r}){const{toast:t}=W(),[v,c]=i.useState(!1),[m,h]=i.useState(!1),[s,b]=i.useState(n),[d,N]=i.useState(),y=()=>c(!0),g=()=>c(!1),k=a=>{b(a),g()},C=()=>{if(!f)return t({title:"You are currently unable to process withdrawal.",variant:"destructive"});if(!d)return t({title:"Amount to withdraw is required",variant:"destructive"});if(!s)return t({title:"Please select an account",variant:"destructive"});M.post(route("withdrawal.store"),{amount:Number(d),account_id:s.id},{onStart:()=>h(!0),onFinish:()=>h(!1),onSuccess:a=>{t({title:"Withdrawal successful",description:a.props.flash.success,variant:"success"})},onError:a=>{const l=_(a);t({title:l??"Withdrawal failed",variant:"destructive"})}})};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Withdraw"}),e.jsxs("div",{className:"flex flex-col px-4 py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"mb-2 text-end",children:["Balance: ",D(w.user.balance)]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"amount",children:e.jsx(T,{className:"absolute size-8 top-3 start-3 text-gray-300"})}),e.jsx(x,{id:"amount",value:d,onChange:a=>N(a.target.value),placeholder:"Amount to Withdraw",className:"h-14 ps-[3.75rem] placeholder:text-gray-400",type:"number",step:"0.01"})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("label",{htmlFor:"bank",children:e.jsx(q,{className:"absolute size-8 top-3 start-3 text-gray-300"})}),e.jsx(x,{id:"bank",className:"h-14 ps-[3.75rem] cursor-pointer placeholder:text-gray-400",readOnly:!0,onClick:y,placeholder:"Select Bank",value:s==null?void 0:s.bank_name})]}),e.jsxs(o,{disabled:m,onClick:C,className:"text-lg h-14 mt-8",children:[m&&e.jsx(B,{className:"animate-spin"}),"Withdraw"]})]}),e.jsx(I,{open:v,onOpenChange:c,dismissible:!0,children:e.jsxs(P,{className:"bg-card",children:[e.jsx(U,{children:e.jsx(H,{children:"Select Bank"})}),e.jsx("div",{className:"min-h-[30vh] overflow-y-auto",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:r.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:r.map((a,l)=>e.jsxs("li",{className:F("p-4 flex justify-between items-center cursor-pointer hover:bg-primary",{"border-t":l===0,"border-b":l===r.length-1,"bg-primary/10":a.id===(s==null?void 0:s.id)}),onClick:()=>k(a),children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:a.bank_name}),e.jsx("span",{className:"text-sm text-gray-300",children:a.account_number})]}),a.id===(s==null?void 0:s.id)&&e.jsx(R,{className:"text-secondary"})]},a.bank_code))}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-16",children:[e.jsx(L,{className:"size-8 mb-4"}),e.jsx("p",{children:"No accounts found"}),e.jsx(o,{variant:"link",asChild:!0,children:e.jsxs(u,{href:route("add-withdrawal-account"),className:"mt-4 text-secondary underline",children:[e.jsx(j,{className:"mr-2"}),"Add a New Account"]})})]})})}),e.jsx(p,{children:r.length>0&&e.jsx(p,{children:e.jsx(o,{asChild:!0,children:e.jsxs(u,{href:route("add-withdrawal-account"),children:[e.jsx(j,{}),"Add a New Account"]})})})})]})})]})}X.layout=n=>e.jsx(z,{backUrl:route("wallet"),showHeader:!1,hideBottomNav:!0,title:"Withdraw",children:n});export{X as default};
